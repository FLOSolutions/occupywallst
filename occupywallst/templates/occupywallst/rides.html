{% extends base %}

{% block title %}Free Bus/Carpool Route Map | OccupyWallSt.org{% endblock title %}

{% block stylesheets %}
  <style type="text/css">
    #navbar .nav-rides { background: #900; }
  </style>
{% endblock stylesheets %}

{% block scripts %}
  <script src="//maps.google.com/maps/api/js?sensor=false&region=us" type="text/javascript"></script>
  <script src="//maps.google.com/maps/api/js?libraries=places&sensor=false&region=us" type="text/javascript"></script>
{% endblock scripts %}

{% block js_init %}
  {{ block.super }}
  rides_init({
    "map": document.getElementById("map"),
    "center": new google.maps.LatLng(40.717712644386026, -74.00913921356198),
    "zoom": 8
  });

{% endblock js_init %}

{% block content %}
  <section id="rides">
    <h1 style="margin-bottom: 0.5em; ">
      Bus/Carpool
      <img id="loader" style="display:none" src="/media/img/ajax-loader.gif" width="16" height="16" />
    </h1>
    <p><strong>This feature is still in progress!</strong></p>
    <div style="width: 100%; height: 500px; " id="map"></div>
    <div id="add_ride" style="display:none">
    <form method="POST" action=".">{% csrf_token %}
        <table class="formtable">
            <tbody>
                {{ form.as_table }}
            </tbody>
        </table>
        <input type="submit" value="Add ride"/>
    </form>
    </div>
    <table id="ridetable">
        <thead>
            <tr>
                <td>Ride type</td>
                <td>Ride name</td>
                <td>Depart time</td>
                <td>Available seats</td>
            </tr>
        </thead>
        <tbody>
            {% for ride in rides %}
            <tr>
                <td>{{ ride.ridetype }}</td>
                <td>{{ ride.title }} </td>
                <td>{{ ride.depart_time }}</td>
                <td>{{ ride.seats_avail }}</td>

            </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="#" id="add_link">Add a ride</a>
            </section>
{% endblock content %}
